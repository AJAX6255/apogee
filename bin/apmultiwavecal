#!/usr/bin/env python
# encoding: utf-8
#
# @Author: Jon Holtzman
# @Date: November 2018
# @Filename: apmultiwavecal
# @License: BSD 3-Clause
# @Copyright: Jon Holtzman


from __future__ import division
from __future__ import print_function
from __future__ import absolute_import
from __future__ import unicode_literals

import argparse
import datetime
import time
import os
import sys
import subprocess
import matplotlib
import numpy as np
import pdb
matplotlib.use('Agg')

from apogee.apred import wave

if __name__ == '__main__' :

    parser = argparse.ArgumentParser(
        prog=os.path.basename(sys.argv[0]),
        description='Does pca compression of a synthetic spectral grid')

    parser.add_argument("frames", type=int, help='List of frames',nargs='+')
    parser.add_argument("--rows", type=int, help='list of rows to fit', default=np.arange(300),nargs='+')
    args=parser.parse_args()

    now = datetime.datetime.now()
    start = time.time()
    print ("Start: ",now.strftime("%Y-%m-%d %H:%M:%S"))
    wave.wavecal(args.frames,rows=args.rows)
    now = datetime.datetime.now()
    print ("End: ",now.strftime("%Y-%m-%d %H:%M:%S"))
    print("elapsed: ",time.time()-start)
